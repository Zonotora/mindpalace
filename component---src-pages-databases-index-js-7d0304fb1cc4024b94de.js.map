{"version":3,"sources":["webpack:///./src/pages/databases/index.js"],"names":["formatDate","currentDate","date","time","Math","abs","days","ceil","months","floor","years","paletteColor","tag","p","hash","length","i","charCodeAt","paletteHash","FileSystemItem","fileName","fileType","lastModified","tagsInFiles","setTooltip","className","map","key","onMouseEnter","onMouseLeave","style","color","left","FileInformation","numberOfDirs","numberOfFiles","SearchItem","search","dangerouslySetInnerHTML","__html","snapshot","title","body","IndexPage","data","useState","siteTitle","setSiteTitle","url","dirs","files","setLastModified","searchResults","setSearchResults","tooltip","useEffect","nodes","allMarkdownRemark","edges","filter","node","frontmatter","slug","startsWith","substring","split","modified","forEach","Date","toISOString","hasOwnProperty","lastIndexOf","searches","ref","to","filesystem","dir","file","parent"],"mappings":"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","file":"component---src-pages-databases-index-js-7d0304fb1cc4024b94de.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link, graphql } from \"gatsby\";\nimport { FaRegFile, FaFolder, FaTag } from \"react-icons/fa\";\n\nimport Layout from \"components/Layout\";\nimport { DirectoryHeader } from \"components/Header\";\nimport { BackButton } from \"components/Button\";\nimport Searchfield from \"components/Searchfield\";\nimport \"templates/template.css\";\n\nconst formatDate = (currentDate, date) => {\n  const time = Math.abs(currentDate - date);\n  const days = Math.ceil(time / (1000 * 60 * 60 * 24));\n  const months = Math.floor(days / 31);\n  const years = Math.floor(days / 365);\n\n  if (years > 0) return `${years} year${years > 1 ? \"s\" : \"\"} ago`;\n  else if (months > 0) return `${months} month${months > 1 ? \"s\" : \"\"} ago`;\n  else if (days === 0) return \"today\";\n  return `${days} day${days > 1 ? \"s\" : \"\"} ago`;\n};\n\nconst paletteHash = (tag) => {\n  var hash = 0;\n  if (tag.length === 0) return hash;\n  for (let i = 0; i < tag.length; i++) {\n    let chr = tag.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 1;\n  }\n  return Math.abs(hash);\n};\n\nconst palette = () => [\n  \"#ed5f5f\",\n  \"#ed8a5f\",\n  \"#eda85f\",\n  \"#edd35f\",\n  \"#e8ed5f\",\n  \"#c0ed5f\",\n  \"#9fed5f\",\n  \"#79ed5f\",\n  \"#5fed77\",\n  \"#5fed95\",\n  \"#5fedb9\",\n  \"#5fdfed\",\n  \"#5fb4ed\",\n  \"#5f95ed\",\n  \"#5f70ed\",\n  \"#8a5fed\",\n  \"#a65fed\",\n  \"#d55fed\",\n  \"#ed5fd3\",\n  \"#ed5f9f\",\n];\n\nconst paletteColor = (tag) => {\n  const p = palette();\n  return p[paletteHash(tag) % p.length];\n};\n\nconst FileSystemItem = ({ fileName, fileType, lastModified, tagsInFiles, setTooltip }) => {\n  return (\n    <div className=\"template-filesystem-item\">\n      <div className=\"template-filesystem-item-icon\">\n        {fileType === \"file\" ? <FaRegFile /> : <FaFolder />}\n      </div>\n      <div className=\"template-filesystem-item-text\">{fileName}</div>\n\n      {tagsInFiles[fileName] ? (\n        <div className=\"template-filesystem-item-tags\">\n          {tagsInFiles[fileName].map((tag, i) => (\n            <FaTag\n              key={tag}\n              onMouseEnter={() => setTooltip(tag)}\n              onMouseLeave={() => setTooltip(\"\")}\n              style={{ color: paletteColor(tag), left: `${i * -6}px`}}\n            />\n          ))}\n        </div>\n      ) : (\n        <></>\n      )}\n\n      <div className=\"template-filesystem-item-last-modified\">\n        {lastModified[fileName]}\n      </div>\n    </div>\n  );\n};\n\nconst FileInformation = ({ numberOfDirs, numberOfFiles }) => {\n  return (\n    <div className=\"template-filesystem-header-information\">\n      <div>\n        <FaFolder />\n        <span>{numberOfDirs}</span>\n      </div>\n      <div>\n        <FaRegFile />\n        <span>{numberOfFiles}</span>\n      </div>\n    </div>\n  );\n};\n\nconst SearchItem = ({ search }) => {\n  return (\n    <div className=\"template-filesystem-item\">\n      <div\n        className=\"template-filesystem-item-text-header\"\n        dangerouslySetInnerHTML={{ __html: search.snapshot.title }}\n      />\n      <div\n        className=\"template-filesystem-item-text\"\n        dangerouslySetInnerHTML={{ __html: search.snapshot.body }}\n      />\n    </div>\n  );\n};\n\nconst TagInformation = ({ tags }) => {\n  if (Object.keys(tags).length === 0) return <></>;\n\n  return (\n    <div className=\"template-display-tags\">\n      {Object.keys(tags).map((key) => (\n        <div\n          key={key}\n          style={{\n            color: paletteColor(key),\n            border: `solid 1px ${paletteColor(key)}`,\n          }}\n        >\n          <FaTag />\n          <span>{key}</span>\n          <span>{tags[key]}</span>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst IndexPage = ({ data }) => {\n  const [siteTitle, setSiteTitle] = useState(\"\");\n  const { url, dirs, files } = { url: \"/databases\", dirs: [], files: [\"databases\",\"sql\"] };\n  const [numberOfFiles, numberOfDirs ] = [2, 0];\n  const [tags, tagsInFiles] = [{\"wip\":1}, {\"databases\":[\"wip\"]}];\n  const [lastModified, setLastModified] = useState({});\n  const [searchResults, setSearchResults] = useState([]);\n  const [tooltip, setTooltip] = useState(\"\");\n\n  useEffect(() => {\n    const nodes = data.allMarkdownRemark.edges\n      .filter((node) => node.node.frontmatter.slug.startsWith(url))\n      .map((node) => {\n        return {\n          slug: node.node.frontmatter.slug.substring(url.length).split(\"/\")[1],\n          date: node.node.frontmatter.lastModified,\n        };\n      });\n\n    const modified = {};\n    nodes.forEach((node) => {\n      modified[node.slug] = node.date;\n    });\n\n    const currentDate = new Date(new Date().toISOString().split(\"T\")[0]);\n\n    for (const key in modified) {\n      if (modified.hasOwnProperty(key)) {\n        modified[key] = formatDate(currentDate, new Date(modified[key]));\n      }\n    }\n\n    setLastModified(modified);\n  }, [data]);\n\n  useEffect(() => {\n    const title = url.substring(url.lastIndexOf(\"/\") + 1, url.length);\n    setSiteTitle(title === \"\" ? \"root\" : title);\n  }, [url]);\n\n  const searches = (\n    <div className=\"template-filesystem-searches\">\n      {searchResults.map((search) => (\n        <Link key={search.ref} to={search.ref}>\n          <SearchItem search={search} />\n        </Link>\n      ))}\n    </div>\n  );\n\n  const filesystem = (\n    <>\n      <div className=\"template-filesystem-directories\">\n        {dirs.map((dir) => (\n          <Link key={dir} to={`${url}/${dir}`}>\n            <FileSystemItem\n              fileName={dir}\n              fileType=\"folder\"\n              lastModified={lastModified}\n              tagsInFiles={tagsInFiles}\n              setTooltip={setTooltip}\n            />\n          </Link>\n        ))}\n      </div>\n      <div className=\"template-filesystem-files\">\n        {files.map((file) => (\n          <Link key={file} to={`${url}/${file}`}>\n            <FileSystemItem\n              fileName={file}\n              fileType=\"file\"\n              lastModified={lastModified}\n              tagsInFiles={tagsInFiles}\n              setTooltip={setTooltip}\n            />\n          </Link>\n        ))}\n      </div>\n    </>\n  );\n\n  return (\n    <Layout>\n      <div className=\"template-structure\">\n        <Searchfield\n          className=\"directory\"\n          setSearchResults={setSearchResults}\n        />\n        <div className=\"template-filesystem\">\n          <div className=\"template-filesystem-header\">\n            {siteTitle !== \"root\" ? (\n              <BackButton parent={url.substring(0, url.lastIndexOf(\"/\"))} />\n            ) : (\n              <></>\n            )}\n            <div className=\"template-filesystem-header-title\">{siteTitle}</div>\n            <FileInformation\n              numberOfDirs={numberOfDirs}\n              numberOfFiles={numberOfFiles}\n            />\n            {tooltip === \"\" ? (\n              <div className=\"template-filesystem-tooltip\"></div>\n            ) : (\n              <div className=\"template-filesystem-tooltip active\">{tooltip}</div>\n            )}\n          </div>\n\n\n          {searchResults.length !== 0 ? searches : filesystem}\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport const pageQuery = graphql`\n  query {\n    allMarkdownRemark(sort: { fields: frontmatter___lastModified }) {\n      edges {\n        node {\n          frontmatter {\n            lastModified(formatString: \"YYYY-MM-DD\")\n            slug\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default IndexPage;\n"],"sourceRoot":""}